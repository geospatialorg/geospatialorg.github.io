import useBaseUrl from '@docusaurus/useBaseUrl';
import React from 'react';

# Grid ANCPI 40km

## Cod set de date

**`ro_grid_data_ancpi_40km`**

<figure style={{ textAlign: "center" }}>
  <img src={useBaseUrl('https://services.geo-spatial.org/data/thumbnails/grids/data/ro_grid_data_ancpi_40km.svg')} alt="Caroiaje geografice - Grid ANCPI 40km" />
</figure>

## Abordare practicÄƒ

Caroiajul geografic, format vectorial/poligon, 40 x 40 km, a fost descÄƒrcat folosind [API-ului Esri REST al ANCPI](https://geoportal.ancpi.ro/portal/apps/webappviewer/index.html?id=50289a41aafc4e01aefd131c2105e374) È™i procesat prin intermediul unui script Bash (mediu *nix). Pentru paÈ™ii de procesare, scriptul utilizeazÄƒ mai multe biblioteci open source È™i utilitare de sistem: [GDAL](https://gdal.org), [mapshaper](https://mapshaper.org/), [curl](https://curl.se/), zip. Scriptul rezultat este prezentat Ã®n secÈ›iunea [Script ETL](#script-etl) È™i accesibil pentru descÄƒrcare pe pagina [GitHub](https://github.com/geospatialorg/ingestie-date/blob/main/publish_update_ro_grid_data_ancpi_40km.sh) a geo-spatial.org.

## Prelucrarea datelor

### Eliminarea cÃ¢mpurilor cu informaÈ›ie nerelevantÄƒ

O serie din cÃ¢mpuri au fost considerate neimportante pentru utilizatorul obiÈ™nuit: `Class1`, `Shape_STAr`, `Shape_STLe`, `Class2`, `Class3`, `Class4`, `Shape_ST_1`, `Shape_ST_2`, `Shape_Length`, `Shape_Area`, `Link`, `FrameTarget`. Aceste cÃ¢mpuri au rolul lor pentru scopul iniÈ›ial al ANCPI (distribuirea datelor MNAT) dar, pentru alte utilizÄƒri, nu prezintÄƒ importanÈ›Äƒ practicÄƒ.

### Redenumirea cÃ¢mpurilor existente

O serie de cÃ¢mpuri au fost redenumite pentru a asigura consistenÈ›a cu alte seturi de date publicate pe geo-spatial.org

### Corectare atributelor pentru o serie de celule din grid

CÃ¢teva celule din setul original aveau indicativele concatenate cu È™irul de caractere `_c` (84, 85, 98, 128, 141, 179). Au fost corectate (de exemplu, `F13_c` a fost transformat Ã®n `F13` È™i similar).

### Corectarea geometriei caroiajului

Corectarea geometriei caroiajului pentru a acoperi strict o suprafaÈ›Äƒ de 40 x 40 km. Setul original avea o foarte foarte micÄƒ abatere (aprox. 0.1 mm), abatere care ar afecta Ã®nsÄƒ o serie de fluxuri de procesare a datelor raster ce se doresc perfect aliniate.

<figure style={{ textAlign: "center" }}>
  <img src={useBaseUrl('/img/ghiduri/procesari-etl/grids/abatere-coordonate-grid-ancpi-40km.jpg')} alt="Extinderea caroiajului original." />
  <figcaption><em>Extinderea caroiajului original.</em></figcaption>
</figure>

Pentru aceasta s-a folosit un truc tehnic:

- Ãn tabela de atribute, pentru fiecare celulÄƒ, au fost adÄƒugate cÃ¢mpuri cu extinderea geograficÄƒ Ã®n format `Integer` (coordonatele pentru `xmin`, `xmax`, `ymin`, `ymax`). Ãn felul acesta, s-a eliminat acel offset minor al ;
- FiÈ™ierul GPKG a fost convertit Ã®n format CSV. Apoi, cu ajutorul unui script Python, fiÈ™ierul CSV a fost convertit Ã®n format WKT folosind coordonatele calculate anterior. Astfel, s-a obÈ›inut o geometrie perfect aliniatÄƒ cu dimensiunea de 40 x 40 km a caroiajului geografic.

### Conversia Ã®n formate de fiÈ™ier populare

Datele finale au fost convertite Ã®n formatele de fiÈ™ier utilizate de geo-spatial.org pentru distribuirea de date vectoriale: `GeoPackage`, `Shapefile`, `Geoparquet`, `FlatGeobuf`, `GeoJSON`, `TopoJSON`, `KML`. Detalii despre motivaÈ›ia alegerii acestor formate È™i beneficiile fiecÄƒruia sunt prezentate Ã®n ghidul cu privire la date. De asemenea, pentru nevoi interne, datele au fost Ã®ncÄƒrcate Ã®n baza de date PostgreSQL/PostGIS.

### Publicare datelor

Datele au fost documentate Ã®n [Catalogul geo-spatial.org](https://services.geo-spatial.org/geonetwork/srv/eng/catalog.search#/metadata/337d3cb7-45d1-4d60-91b5-76e566d389df) È™i puse la dispoziÈ›ie pentru download/access prin protocolul HTTP È™i prin intermediul serviciilor standardizate OGC. Pentru mai multe detalii accesaÈ›i [Catalogul](https://services.geo-spatial.org/geonetwork/srv/eng/catalog.search#/metadata/337d3cb7-45d1-4d60-91b5-76e566d389df) È™i/sau secÈ›iunea <a href={useBaseUrl('descarcare/date/grids')}>DescÄƒrcare</a>. DefiniÈ›iile folosite pentru simbolizarea WMS a datelor au fost documentate Ã®n secÈ›iunea [Simbolizare SLD](#simbolizare-sld).

## Diagrama fluxului de lucru

```mermaid
flowchart TD
  %% =============== SETUP ===============
  subgraph S[Setup & Config]
    A1["ActiveazÄƒ conda env 'geo'"] --> A2["DefineÈ™te cÄƒi: ancpi_data_path, grids_data_path, tmp_data_path"]
    A2 --> A3["SeteazÄƒ conexiuni: PostGIS È™i GeoServer"]
    A3 --> A4["DefineÈ™te layer_name = ro_grid_data_ancpi_40km"]
  end

  %% =============== EXTRAGERE & CURATARE ===============
  subgraph E[Ingestie & CurÄƒÈ›are]
    E1["ogr2ogr: DescÄƒrcare ESRIJSON ANCPI â†’ GPKG"]
    E2["ogr2ogr: Select atribute utile â†’ GPKG temporar"]
    E3["ogrinfo: Corectare nume celule ID 84,85,98,128,141,179"]
    E4a["ALTER TABLE: adaugÄƒ xmin,xmax,ymin,ymax"]
    E4b["UPDATE: calculeazÄƒ coordonate MBR pentru fiecare geometrie"]
    E5["ogr2ogr: Export CSV din GPKG temporar"]
    E6["python: convert_caroiaj_ancpi_40km_to_csv.py â†’ CSV WKT"]
    E1 --> E2 --> E3 --> E4a --> E4b --> E5 --> E6
  end

  %% =============== CREARE FORMATE DE BAZA ===============
  subgraph F1[Versiuni de bazÄƒ]
    F1a["ogr2ogr: GPKG final â†’ grids/ro_grid_data_ancpi_40km.gpkg"]
    E6 --> F1a
  end

  %% =============== DERIVATE MULTI-FORMAT ===============
  subgraph F2[Derivate multi-format]
    F2a["ogr2ogr: Shapefile (*.shp)"]
    F2b["zip: Arhivare SHP"]
    F2c["ogr2ogr: FlatGeobuf (*.fgb)"]
    F2d["ogr2ogr: GeoParquet (*.parquet)"]
    F2e["ogr2ogr: GeoJSON (EPSG:4326)"]
    F2f["ogr2ogr: KML (EPSG:4326, NameField=name)"]
    F2g["mapshaper: GeoJSON â†’ TopoJSON"]
    F1a --> F2a --> F2b
    F1a --> F2c
    F1a --> F2d
    F1a --> F2e --> F2g
    F1a --> F2f
  end

  %% =============== POSTGIS LOAD ===============
  subgraph DB[ÃncÄƒrcare Ã®n PostGIS]
    DB1["ogr2ogr: Ã®ncÄƒrcare GPKG â†’ PostGIS (schema romania)"]
    DB2["psql: CREATE INDEX GIST + CLUSTER pe tabel"]
    F1a --> DB1 --> DB2
  end

  %% =============== PUBLICARE GEOSERVER ===============
  subgraph GS[Publicare GeoServer]
    GS0["VerificÄƒ existenÈ›Äƒ strat via REST"]
    GS1{"HTTP_STATUS == 200?"}
    GS2["DELETE layer & resources"]
    GS3["POST featureType (name, title, abstract)"]
    GS4["PUT metadate: keywords + link ISO19115"]
    GS5["PUT layer: defaultStyle + secondaryStyle"]
    DB2 --> GS0 --> GS1
    GS1 -- Da --> GS2 --> GS3
    GS1 -- Nu --> GS3
    GS3 --> GS4 --> GS5
  end

  %% =============== CURATARE TEMP ===============
  subgraph C[CurÄƒÈ›are]
    C1["rm: fiÈ™iere SHP auxiliare"]
    C2["rm: GPKG È™i CSV/WKT temporare"]
    GS5 --> C1 --> C2
  end

  %% =============== LEGÄ‚TURI INITIALE ===============
  S --> E
```

<iframe
  src="https://geo-spatial.org/jsoncrack/editor/?json=https://geo-spatial.org/descrieri-etl-json/grids/etl_ro_grid_data_ancpi_40km.json"
  width="100%"
  height="600"
  style={{ border: '1px solid #ccc', borderRadius: '8px' }}
  loading="lazy"
/>

<a
  href="https://geo-spatial.org/jsoncrack/editor/?json=https://geo-spatial.org/descrieri-etl-json/grids/etl_ro_grid_data_ancpi_40km.json"
  target="_blank"
  rel="noopener noreferrer"
>
  Deschide diagrama Ã®ntr-o paginÄƒ separatÄƒ <i className="fa fa-external-link-alt" style={{ marginLeft: '0.3rem' }}></i>
</a>

## Script ETL

```bash title="publish_update_ro_grid_data_ancpi_40km.sh"
#!/usr/bin/zsh

##############################################################################################################
#ğŸ›  Publicare/actualizare Grid ANCPI 40km
##############################################################################################################

#ğŸ› configuraÈ›ii

#ğŸ•¹ activare mediu Anaconda cu bibliotecile necesare pentru procesare
source /home/ubuntu/anaconda3/etc/profile.d/conda.sh
conda activate geo

#ğŸš definire cÄƒi date
ancpi_data_path="/storage/volumes/geoserver-1-storage/brute/institutii_romania/ancpi/caroiaje"
grids_data_path="/storage/volumes/geoserver-1-storage/grids/data"
tmp_data_path="/storage/volumes/geoserver-1-storage/tmp"

#âš™ï¸ PostGIS
pg_host="localhost"
pg_port=5432
pg_user="user"
pg_db="geospatial"
pg_pass="pass"
pg_schema="romania"

#âš™ï¸ GeoServer
gs_url="http://localhost:8080/geoserver"
gs_user="user"
gs_pass="pass"
gs_workspace="grids"
gs_store="grids"
gs_layer_title="Caroiaje - Grid ANCPI 40km"
gs_layer_abstract="Set de date care conÈ›ine caroiajul de 40 x 40 km, Ã®n proiecÈ›ie Stereo70, creat de AgenÈ›ia NaÈ›ionalÄƒ de Cadastru È™i Publicitate ImobiliarÄƒ pentru distribuirea Modelului Numeric Altimetric de Teren. Caroiajul este utilizat de geo-spatial.org pentru prelucrarea È™i distribuirea mai multor seturi de date."
gs_layer_keywords=("RomÃ¢nia" "caroiaj" "vector" "40x40km")
gs_layer_metadata_link="https://services.geo-spatial.org/geonetwork/srv/eng/catalog.search#/metadata/337d3cb7-45d1-4d60-91b5-76e566d389df"
gs_layer_style="grids:ro_grid_data_ancpi_40km_labels"
gs_layer_secondary_style="grids:ro_grid_data_ancpi_40km"

#âš™ï¸ Date
layer_name="ro_grid_data_ancpi_40km"

echo "
ğŸ›  Grid ANCPI 40km
 "

echo "ğŸ’¾ DescÄƒrcarea datelor de pe portalul ANCPI"

#ğŸ’¾ DescÄƒrcarea datelor de pe portalul ANCPI
ogr2ogr -f GPKG ${ancpi_data_path}/caroiaj_ancpi_40km.gpkg -nln caroiaj_ancpi_40km -nlt MULTIPOLYGON --config OGR_ORGANIZE_POLYGONS SKIP --config CPL_CURL_MAX_RETRY 5 --config CPL_CURL_RETRY_DELAY 2 --config CPL_CURL_HTTPS_VERSION TLSv1_2 -skipfailures  "ESRIJSON:https://geoportal.ancpi.ro/hosted_services/rest/services/Descarcare/MNT_tiles/MapServer/0/query?where=1%3D1&outFields=*&returnGeometry=true&f=json"

#ğŸ’¾ Eliminare cÃ¢mpuri neutilizate
ogr2ogr -of GPKG -lco FID=id -nln caroiaj_ancpi_40km -dialect sqlite -sql "SELECT geom AS geometry, OBJECTID as id, Name as name, L as row, C as col FROM caroiaj_ancpi_40km" ${tmp_data_path}/caroiaj_ancpi_40km.gpkg ${ancpi_data_path}/caroiaj_ancpi_40km.gpkg

#ğŸ’¾ Corectare atribute pentru celulele 84, 85, 98, 128, 141, 179 (de exemplu, "F13_c" a fost transformat Ã®n "F13" È™i similar)
ogrinfo ${tmp_data_path}/caroiaj_ancpi_40km.gpkg -dialect SQLite -sql "UPDATE caroiaj_ancpi_40km SET name = 'F13' WHERE ID = 84"
ogrinfo ${tmp_data_path}/caroiaj_ancpi_40km.gpkg -dialect SQLite -sql "UPDATE caroiaj_ancpi_40km SET name = 'F14' WHERE ID = 85"
ogrinfo ${tmp_data_path}/caroiaj_ancpi_40km.gpkg -dialect SQLite -sql "UPDATE caroiaj_ancpi_40km SET name = 'G08' WHERE ID = 98"
ogrinfo ${tmp_data_path}/caroiaj_ancpi_40km.gpkg -dialect SQLite -sql "UPDATE caroiaj_ancpi_40km SET name = 'I15' WHERE ID = 128"
ogrinfo ${tmp_data_path}/caroiaj_ancpi_40km.gpkg -dialect SQLite -sql "UPDATE caroiaj_ancpi_40km SET name = 'J15' WHERE ID = 141"
ogrinfo ${tmp_data_path}/caroiaj_ancpi_40km.gpkg -dialect SQLite -sql "UPDATE caroiaj_ancpi_40km SET name = 'G13' WHERE ID = 179"

#ğŸ’¾ Calcularea coordonatelor xmin, xmax, ymin, ymax pentru fiecare celulÄƒ din caroiaj
ogrinfo ${tmp_data_path}/caroiaj_ancpi_40km.gpkg -sql "ALTER TABLE caroiaj_ancpi_40km ADD COLUMN xmin INTEGER"
ogrinfo ${tmp_data_path}/caroiaj_ancpi_40km.gpkg -sql "ALTER TABLE caroiaj_ancpi_40km ADD COLUMN xmax INTEGER"
ogrinfo ${tmp_data_path}/caroiaj_ancpi_40km.gpkg -sql "ALTER TABLE caroiaj_ancpi_40km ADD COLUMN ymin INTEGER"
ogrinfo ${tmp_data_path}/caroiaj_ancpi_40km.gpkg -sql "ALTER TABLE caroiaj_ancpi_40km ADD COLUMN ymax INTEGER"

ogrinfo ${tmp_data_path}/caroiaj_ancpi_40km.gpkg -dialect SQLite -sql "UPDATE caroiaj_ancpi_40km SET xmin = MbrMinX(geometry), xmax = MbrMaxX(geometry), ymin = MbrMinY(geometry), ymax = MbrMaxY(geometry)"

#ğŸ’¾ Conversie Ã®n format CSV
ogr2ogr -of CSV -dialect sqlite -sql "SELECT id, * FROM caroiaj_ancpi_40km" ${tmp_data_path}/caroiaj_ancpi_40km.csv ${tmp_data_path}/caroiaj_ancpi_40km.gpkg

#ğŸ’¾ Conversie CSV Ã®n format WKT
python convert_caroiaj_ancpi_40km_to_csv.py

#ğŸ’¾ creare versiune GeoPackage
echo "ğŸ’¾ creare versiune GeoPackage"
if [ -f ${grids_data_path}/${layer_name}.gpkg ]; then
    rm ${grids_data_path}/${layer_name}.gpkg
fi
ogr2ogr -of GPKG -lco FID=id -nln ${layer_name} -dialect sqlite -sql "SELECT geometry, id, name, row, col FROM caroiaj_ancpi_40km" ${grids_data_path}/${layer_name}.gpkg ${tmp_data_path}/caroiaj_ancpi_40km.gpkg

#ğŸ’¾ creare fiÈ™iere Esri Shapefile
echo "ğŸ’¾ creare fiÈ™iere Esri Shapefile"
if [ -f ${grids_data_path}/${layer_name}.zip ]; then
    rm ${grids_data_path}/${layer_name}.zip
fi
ogr2ogr -lco ENCODING=UTF-8 -nln ${layer_name} -dialect sqlite -sql "SELECT a.id AS id, * FROM ${layer_name} AS a" ${grids_data_path}/${layer_name}.shp ${grids_data_path}/${layer_name}.gpkg

#ğŸ“¦ arhivare fiÈ™iere shp
echo "ğŸ“¦ arhivare fiÈ™iere shp"
zip -j ${grids_data_path}/${layer_name}.zip ${grids_data_path}/${layer_name}.dbf ${grids_data_path}/${layer_name}.shp ${grids_data_path}/${layer_name}.prj ${grids_data_path}/${layer_name}.shx ${grids_data_path}/${layer_name}.cpg

#ğŸ’¾ creare versiune FlatGeobuf
echo "ğŸ’¾ creare versiune FlatGeobuf"
if [ -f ${grids_data_path}/${layer_name}.fgb ]; then
    rm ${grids_data_path}/${layer_name}.fgb
fi
ogr2ogr -of FlatGeobuf -nlt MULTIPOLYGON -nln ${layer_name} -dialect sqlite -sql "SELECT a.id AS id, * FROM ${layer_name} AS a" ${grids_data_path}/${layer_name}.fgb ${grids_data_path}/${layer_name}.gpkg

#ğŸ’¾ creare versiune GeoParquet
echo "ğŸ’¾ creare versiune GeoParquet"
if [ -f ${grids_data_path}/${layer_name}.parquet ]; then
    rm ${grids_data_path}/${layer_name}.parquet
fi
ogr2ogr -of Parquet -nlt MULTIPOLYGON -nln ${layer_name} -dialect sqlite -sql "SELECT a.id AS id, * FROM ${layer_name} AS a" ${grids_data_path}/${layer_name}.parquet ${grids_data_path}/${layer_name}.gpkg

#ğŸ’¾ creare versiune GeoJSON
echo "ğŸ’¾ creare versiune GeoJSON"
if [ -f ${grids_data_path}/${layer_name}.geojson ]; then
    rm ${grids_data_path}/${layer_name}.geojson
fi
ogr2ogr -of GeoJSON -t_srs EPSG:4326 -nln ${layer_name} -dialect sqlite -sql "SELECT a.id AS id, * FROM ${layer_name} AS a" ${grids_data_path}/${layer_name}.geojson ${grids_data_path}/${layer_name}.gpkg

#ğŸ’¾ creare versiune KML
echo "ğŸ’¾ creare versiune KML"
if [ -f ${grids_data_path}/${layer_name}.kml ]; then
    rm ${grids_data_path}/${layer_name}.kml
fi
ogr2ogr -of KML -t_srs EPSG:4326 -dsco NameField=name ${grids_data_path}/${layer_name}.kml ${grids_data_path}/${layer_name}.gpkg

#ğŸ’¾ creare versiune TopoJSON
echo "ğŸ’¾ creare versiune TopoJSON"
if [ -f ${grids_data_path}/${layer_name}.topojson ]; then
    rm ${grids_data_path}/${layer_name}.topojson
fi
mapshaper -i ${grids_data_path}/${layer_name}.geojson -o format=topojson ${grids_data_path}/${layer_name}.topojson

#ğŸ’¾ actualizarea setului de date Ã®n baza de date PostGIS
echo "ğŸ’¾ actualizarea setului de date Ã®n baza de date PostGIS"
ogr2ogr -of PostgreSQL PG:"host=${pg_host} port=${pg_port} user=${pg_user} dbname=${pg_db} password=${pg_pass}" -lco schema=${pg_schema} -lco GEOMETRY_NAME=geom -lco overwrite=yes ${grids_data_path}/${layer_name}.gpkg ${layer_name} -skipfailures -overwrite

#ğŸ–‡ indexare date PostGIS
psql -h ${pg_host} -p ${pg_port} -U ${pg_user} -d ${pg_db} -c "
CREATE INDEX ${layer_name}_geom_idx ON romania.${layer_name} USING GIST (geom);
CLUSTER romania.${layer_name} USING ${layer_name}_geom_idx;"

#ğŸ’¾ publicarea/actualizarea serviciilor de date
echo "ğŸ’¾ publicarea/actualizarea serviciilor de date"

#âŒ È™tergere strat existent (dacÄƒ existÄƒ)
echo "ğŸ” Verificare dacÄƒ existÄƒ stratul."
HTTP_STATUS=$(curl -s -o /dev/null -w "%{http_code}" -u $gs_user:$gs_pass \
  "${gs_url}/rest/layers/${gs_workspace}:${layer_name}.xml")

if [ "$HTTP_STATUS" == "200" ]; then
    echo "âš ï¸  Stratul existÄƒ. Se È™terge."
    curl -s -u $gs_user:$gs_pass -XDELETE \
      "${gs_url}/rest/layers/${gs_workspace}:${layer_name}?recurse=true"
    echo "ğŸ—‘ï¸  Stratul a fost È™ters."
else
    echo "âœ… Nu existÄƒ strat cu acest nume."
fi

#ğŸ’¾ creare strat
echo "â• Creare strat ${layer_name}"
curl -s -u $gs_user:$gs_pass -XPOST -H "Content-type: text/xml" \
  -d "<featureType>
         <name>${layer_name}</name>
         <nativeName>${layer_name}</nativeName>
         <title>${gs_layer_title}</title>
         <abstract>${gs_layer_abstract}</abstract>
     </featureType>" \
  "${gs_url}/rest/workspaces/${gs_workspace}/datastores/${gs_store}/featuretypes"

#ğŸ’¾ adÄƒugare detalii suplimentare (keywords È™i metadata link)
echo "ğŸ“ Actualizare metadate"
keywords_xml=""
for keyword in "${gs_layer_keywords[@]}"; do
    keywords_xml+="<string>${keyword}</string>"
done

curl -s -u $gs_user:$gs_pass -XPUT -H "Content-type: text/xml" \
-d "<featureType>
        <keywords>
            ${keywords_xml}
        </keywords>
        <metadataLinks>
            <metadataLink>
                <type>text/xml</type>
                <metadataType>ISO19115:2003</metadataType>
                <content>${gs_layer_metadata_link}</content>
            </metadataLink>
        </metadataLinks>
    </featureType>" \
"${gs_url}/rest/workspaces/${gs_workspace}/datastores/${gs_store}/featuretypes/${layer_name}"

#ğŸ’¾ Setare stil implicit + ataÈ™are stil suplimentar
echo "ğŸ¨ Setare stil implicit + ataÈ™are stil suplimentar..."
curl -s -u $gs_user:$gs_pass -XPUT -H "Content-type: text/xml" \
  -d "<layer>
         <defaultStyle>
             <name>${gs_layer_style##*:}</name>
         </defaultStyle>
         <styles>
             <style>
                 <name>${gs_layer_secondary_style##*:}</name>
             </style>
         </styles>
     </layer>" \
  "${gs_url}/rest/layers/${gs_workspace}:${layer_name}"

echo "âœ… Stratul ${layer_name} a fost adÄƒugat È™i configurat cu succes Ã®n GeoServer."

#ğŸ—‘ï¸ È˜tergere fiÈ™iere intermediare
echo "ğŸ—‘ï¸ È˜tergere fiÈ™iere intermediare"
rm ${grids_data_path}/${layer_name}.dbf ${grids_data_path}/${layer_name}.shp ${grids_data_path}/${layer_name}.prj ${grids_data_path}/${layer_name}.shx ${grids_data_path}/${layer_name}.cpg ${tmp_data_path}/caroiaj_ancpi_40km.gpkg ${tmp_data_path}/caroiaj_ancpi_40km.csv ${tmp_data_path}/caroiaj_ancpi_40km.wkt
```
Script accesibil È™i pe [GitHub](https://github.com/geospatialorg/ingestie-date/blob/main/publish_update_ro_admin_lau_polygon.sh).

## Simbolizare SLD

### Simbolizare SLD implicitÄƒ

```xml title="ro_grid_data_ancpi_40km_labels.sld"
<?xml version="1.0" encoding="UTF-8"?>
<StyledLayerDescriptor xmlns="http://www.opengis.net/sld" xmlns:ogc="http://www.opengis.net/ogc" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" version="1.1.0" xmlns:se="http://www.opengis.net/se" xsi:schemaLocation="http://www.opengis.net/sld http://schemas.opengis.net/sld/1.1.0/StyledLayerDescriptor.xsd">
  <NamedLayer>
    <se:Name>ro_grid_data_ancpi_40km</se:Name>
    <UserStyle>
      <se:Name>ro_grid_data_ancpi_40km</se:Name>
      <se:FeatureTypeStyle>
        <se:Rule>
          <se:Name>Grid ANCPI 40km</se:Name>
          <se:Description>
            <se:Title>Grid ANCPI 40km</se:Title>
          </se:Description>
          <se:MinScaleDenominator>5000000</se:MinScaleDenominator>
          <se:LineSymbolizer>
            <se:Stroke>
              <se:SvgParameter name="stroke">#000000</se:SvgParameter>
              <se:SvgParameter name="stroke-width">2</se:SvgParameter>
              <se:SvgParameter name="stroke-linejoin">bevel</se:SvgParameter>
              <se:SvgParameter name="stroke-linecap">square</se:SvgParameter>
            </se:Stroke>
          </se:LineSymbolizer>
        </se:Rule>
        <se:Rule>
          <se:Name>Grid ANCPI 40km</se:Name>
          <se:Description>
            <se:Title>Grid ANCPI 40km</se:Title>
          </se:Description>
          <se:MaxScaleDenominator>5000000</se:MaxScaleDenominator>
          <se:LineSymbolizer>
            <se:Stroke>
              <se:SvgParameter name="stroke">#000000</se:SvgParameter>
              <se:SvgParameter name="stroke-width">2</se:SvgParameter>
              <se:SvgParameter name="stroke-linejoin">bevel</se:SvgParameter>
              <se:SvgParameter name="stroke-linecap">square</se:SvgParameter>
            </se:Stroke>
          </se:LineSymbolizer>
        </se:Rule>
        <se:Rule>
          <se:MaxScaleDenominator>5000000</se:MaxScaleDenominator>
          <se:TextSymbolizer>
            <se:Label>
              <ogc:PropertyName>name</ogc:PropertyName>
            </se:Label>
            <se:Font>
              <se:SvgParameter name="font-family">Helvetica</se:SvgParameter>
              <se:SvgParameter name="font-size">14</se:SvgParameter>
            </se:Font>
            <se:LabelPlacement>
              <se:PointPlacement>
                <se:AnchorPoint>
                  <se:AnchorPointX>0</se:AnchorPointX>
                  <se:AnchorPointY>0.5</se:AnchorPointY>
                </se:AnchorPoint>
              </se:PointPlacement>
            </se:LabelPlacement>
            <se:Halo>
              <se:Radius>1</se:Radius>
              <se:Fill>
                <se:SvgParameter name="fill">#ffffff</se:SvgParameter>
              </se:Fill>
            </se:Halo>
            <se:Fill>
              <se:SvgParameter name="fill">#000000</se:SvgParameter>
            </se:Fill>
            <se:VendorOption name="maxDisplacement">1</se:VendorOption>
          </se:TextSymbolizer>
        </se:Rule>
      </se:FeatureTypeStyle>
    </UserStyle>
  </NamedLayer>
</StyledLayerDescriptor>
```
FiÈ™ier accesibil È™i pe [GitHub](https://github.com/geospatialorg/simbolizare/blob/main/sld/grids/ro_grid_data_ancpi_40km_labels.sld).

### Simbolizare SLD alternativÄƒ

```xml title="ro_grid_data_ancpi_40km.sld"
<?xml version="1.0" encoding="UTF-8"?>
<StyledLayerDescriptor xmlns="http://www.opengis.net/sld" xmlns:ogc="http://www.opengis.net/ogc" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" version="1.1.0" xmlns:se="http://www.opengis.net/se" xsi:schemaLocation="http://www.opengis.net/sld http://schemas.opengis.net/sld/1.1.0/StyledLayerDescriptor.xsd">
  <NamedLayer>
    <se:Name>ro_grid_data_ancpi_40km</se:Name>
    <UserStyle>
      <se:Name>ro_grid_data_ancpi_40km</se:Name>
      <se:FeatureTypeStyle>
        <se:Rule>
          <se:Name>Single symbol</se:Name>
          <se:LineSymbolizer>
            <se:Stroke>
              <se:SvgParameter name="stroke">#000000</se:SvgParameter>
              <se:SvgParameter name="stroke-width">2</se:SvgParameter>
              <se:SvgParameter name="stroke-linejoin">bevel</se:SvgParameter>
              <se:SvgParameter name="stroke-linecap">square</se:SvgParameter>
            </se:Stroke>
          </se:LineSymbolizer>
        </se:Rule>
      </se:FeatureTypeStyle>
    </UserStyle>
  </NamedLayer>
</StyledLayerDescriptor>
```
FiÈ™ier accesibil È™i pe [GitHub](https://github.com/geospatialorg/simbolizare/blob/main/sld/grids/ro_grid_data_ancpi_40km.sld).
